<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="fr"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:f="http://java.sun.com/jsf/core">

<!-- ______ ______ -->

<div class="containerFlex">

    <!-- execute methode in loading page. -->
    <f:metadata>
        <f:event type="preRenderView" listener="#{i18nBean.loadLanguagePage}"/>
    </f:metadata>

    <div id="LogoSpace">


        <h:form id="headerLanguageButtonContainer">
            <p:menuButton value="#{I18N['header.language']}" class="headerLanguageButton ui-button-primary" iconPos="right">

                <p:menuitem value="#{I18N['header.language.fr']}" action="#{i18nBean.changeLanguage('fr','headerLanguageButtonContainer')}"/>
                <p:menuitem value="#{I18N['header.language.en']}" action="#{i18nBean.changeLanguage('en','headerLanguageButtonContainer')}"/>

            </p:menuButton>
        </h:form>

        <p:linkButton outcome="/VIEW/home.xhtml" value="#{I18N['logo.title']}" style="margin-right:20px;"/>
    </div>



    <div class="card">
        <h:form>
            <p:growl id="messages"/>
            <p:menubar>
                <p:submenu label="#{I18N['menu.data.DM']}" icon="pi pi-fw pi-briefcase" rendered="#{connectionBean.verifyPermissionUser('DataManager')}">
                    <p:submenu label="#{I18N['menu.data.site']}" icon="pi pi-fw pi-building">
                        <p:menuitem value="#{I18N['menu.data.site.add']}" icon="pi pi-fw pi-plus pi-building" action="/VIEW/addSite.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add a site')}"/>
                        <p:menuitem value="#{I18N['menu.data.site.consult']}" icon="pi pi-fw pi-building pi-pencil" action="/VIEW/listOfSites.xhtml" rendered="#{connectionBean.verifyPermissionUser('List of sites')}"/>
                    </p:submenu>
                    <p:divider/>
                    <p:submenu label="#{I18N['menu.data.users']}" icon="pi pi-fw pi-user">
                        <p:menuitem value="#{I18N['menu.data.users.add']}" icon="pi pi-fw pi-user-plus" action="/VIEW/addUser.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add a user')}"/>
                        <p:menuitem value="#{I18N['menu.data.users.consult']}" icon="pi pi-fw pi-user pi-pencil" action="/VIEW/listOfUsers.xhtml" rendered="#{connectionBean.verifyPermissionUser('List of users')}"/>
                        <p:menuitem value="#{I18N['menu.data.usersSite.add']}" icon="pi pi-fw pi-user pi-building pi-plus" action="/VIEW/addUserSite.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add a list of sites for a user')}"/>
                        <p:menuitem value="#{I18N['menu.data.usersSite.consult']}" icon="pi pi-fw pi-user pi-building pi-pencil" action="/VIEW/listOfUsersSites.xhtml" rendered="#{connectionBean.verifyPermissionUser('List of users and related sites')}"/>
                    </p:submenu>
                    <p:divider/>
                    <p:submenu label="#{I18N['menu.data.role']}" icon="pi pi-fw pi-wrench">
                        <p:menuitem value="#{I18N['menu.data.role.add']}" icon="pi pi-fw pi-wrench pi-plus" action="/VIEW/addRole.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add a role')}"/>
                        <p:menuitem value="#{I18N['menu.data.role.consult']}" icon="pi pi-fw pi-wrench pi-pencil" action="/VIEW/listOfRoles.xhtml" rendered="#{connectionBean.verifyPermissionUser('List of roles')}"/>
                        <p:menuitem value="#{I18N['menu.data.rolePermission.add']}" icon="pi pi-fw pi-user pi-wrench pi-plus" action="/VIEW/addRolePermission.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add a list of permissions for a role')}"/>
                        <p:menuitem value="#{I18N['menu.data.rolePermission.modify']}" icon="pi pi-fw pi-user pi-wrench pi-pencil" action="/VIEW/listOfRolePermission.xhtml" rendered="#{connectionBean.verifyPermissionUser('List of roles and related permissions')}"/>
                    </p:submenu>
                </p:submenu>
                <p:submenu label="#{I18N['menu.subject']}" icon="pi pi-fw pi-users">
                    <p:submenu label="#{I18N['menu.data.subject']}" icon="pi pi-fw pi-users">
                        <p:menuitem value="#{I18N['menu.data.subject.add']}" icon="pi pi-fw pi-plus" action="/VIEW/addSubject.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add a subject')}"/>
                        <p:menuitem value="#{I18N['menu.data.subject.consult']}" icon="pi pi-fw pi-building pi-pencil" action="/VIEW/listOfSubjects.xhtml" rendered="#{connectionBean.verifyPermissionUser('List of subjects')}"/>
                        <p:divider/>
                    </p:submenu>
                    <p:submenu label="#{I18N['menu.data.event']}" icon="pi pi-fw pi-ticket">
                        <p:menuitem value="#{I18N['menu.data.event.add']}" icon="pi pi-fw pi-plus" action="/VIEW/addEvent.xhtml" rendered="#{connectionBean.verifyPermissionUser('Add an event')}"/>
                        <p:menuitem value="#{I18N['menu.data.event.consult']}" icon="pi pi-fw pi-ticket" action="/VIEW/listOfAllEvents.xhtml"/>
                        <p:divider/>
                    </p:submenu>
                </p:submenu>
                <p:submenu label="#{I18N['menu.CRA']}" icon="pi pi-fw pi-book" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'CRA'}">
                    <p:submenu label="#{I18N['menu.data.CRA']}" icon="pi pi-fw pi-book" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'CRA'}">
                        <p:menuitem value="#{I18N['menu.data.CRA.to.validate']}" icon="pi pi-fw pi-bookmark" action="/VIEW/listOfAllEventsToMonitor.xhtml" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'CRA'}"/>
                        <p:divider/>
                    </p:submenu>
                </p:submenu>
                <p:submenu label="#{I18N['menu.MEDICAL']}" icon="pi pi-fw pi-heart" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'MEDICAL'}">
                    <p:submenu label="#{I18N['menu.data.MEDICAL']}" icon="pi pi-fw pi-heart" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'MEDICAL'}">
                        <p:menuitem value="#{I18N['menu.data.MEDICAL.to.validate']}" icon="pi pi-fw pi-heart-fill" action="/VIEW/listOfAllEventsToCodeAe.xhtml" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'MEDICAL'}"/>
                        <p:menuitem value="#{I18N['menu.data.MEDICAL.to.validate']}" icon="pi pi-fw pi-heart-fill" action="/VIEW/listOfAllEventsToCodeCm.xhtml" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'MEDICAL'}"/>
                        <p:divider/>
                    </p:submenu>
                </p:submenu>
                <p:submenu label="#{I18N['menu.query']}" icon="pi pi-fw pi-question-circle">
                    <p:submenu label="#{I18N['menu.data.query']}" icon="pi pi-fw pi-question-circle">
                        <p:menuitem value="#{I18N['menu.data.query.to.consult']}" icon="pi pi-fw pi-question-circle" action="/VIEW/listOfAllQueries.xhtml"/>
                        <p:menuitem value="#{I18N['menu.data.query.to.answer']}" icon="pi pi-fw pi-comment" action="/VIEW/listOfAllQueriesToAnswer.xhtml" rendered="#{connectionBean.verifyPermissionUser('Answer to a query') and connectionBean.user.roleByIdRole.roleLabel == 'DATA MANAGER'}"/>
                        <p:menuitem value="#{I18N['menu.data.query.to.answer']}" icon="pi pi-fw pi-comment" action="/VIEW/listOfAllQueriesToAnswerPermitted.xhtml" rendered="#{connectionBean.verifyPermissionUser('Answer to a query') and connectionBean.user.roleByIdRole.roleLabel != 'DATA MANAGER'}"/>
                        <p:menuitem value="#{I18N['menu.data.query.answered']}" icon="pi pi-fw pi-comments" action="/VIEW/listOfAllQueriesAnswered.xhtml" rendered="#{connectionBean.user.roleByIdRole.roleLabel == 'DATA MANAGER'}"/>
                        <p:menuitem value="#{I18N['menu.data.query.answered']}" icon="pi pi-fw pi-comments" action="/VIEW/listOfAllQueriesAnsweredPermitted.xhtml" rendered="#{connectionBean.verifyPermissionUser('Close a query') and connectionBean.user.roleByIdRole.roleLabel != 'DATA MANAGER'}"/>
                        <p:divider/>
                    </p:submenu>
                </p:submenu>
                <f:facet name="options">
                    <p:commandButton value="Logout"  action="#{connectionBean.logOut}" icon="pi pi-fw pi-sign-out" styleClass="ui-button-info"/>
                </f:facet>
            </p:menubar>
        </h:form>
    </div>


</div>


</html>
